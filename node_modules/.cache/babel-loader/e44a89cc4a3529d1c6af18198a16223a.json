{"ast":null,"code":"import _regeneratorRuntime from\"/Users/manuelpolaina/Documents/CURSOS/JUANP/React/MERNtasks/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/manuelpolaina/Documents/CURSOS/JUANP/React/MERNtasks/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/manuelpolaina/Documents/CURSOS/JUANP/React/MERNtasks/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import tareaContext from'./tareaContext';import tareaReducer from'./tareaReducer';import{TAREAS_PROYECTO,AGREGAR_TAREA,VALIDAR_TAREA,ELIMINAR_TAREA,TAREA_ACTUAL,ACTUALIZAR_TAREA,LIMPIAR_TAREA}from'../../types';import clienteAxios from'../../config/axios';var TareaState=function TareaState(props){var initialState={tareasproyecto:[],errortarea:false,tareaseleccionada:null};// Crear dispatch y el state\nvar _useReducer=useReducer(tareaReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// FUNCIONES\n// Obtener las tareas de un proyecto\nvar obtenerTareas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(proyecto){var resultado;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(proyecto);_context.prev=1;_context.next=4;return clienteAxios.get('../api/tareas',{params:{proyecto:proyecto}});case 4:resultado=_context.sent;console.log(resultado.data.tareas);dispatch({type:TAREAS_PROYECTO,payload:resultado.data.tareas});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function obtenerTareas(_x){return _ref.apply(this,arguments);};}();// Agregar una tarea\nvar agregarTarea=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(tarea){var resultado;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return clienteAxios.post('/api/tareas',tarea);case 3:resultado=_context2.sent;//console.log(resultado.data)\ndispatch({type:AGREGAR_TAREA,payload:resultado.data.tarea});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function agregarTarea(_x2){return _ref2.apply(this,arguments);};}();// Valida y muestra error en la tarea\nvar validarTarea=function validarTarea(){dispatch({type:VALIDAR_TAREA});};// Eliminar tarea por id\nvar eliminarTarea=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,proyecto){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return clienteAxios.delete(\"/api/tareas/\".concat(id),{params:{proyecto:proyecto}});case 3:dispatch({type:ELIMINAR_TAREA,payload:id});_context3.next=8;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function eliminarTarea(_x3,_x4){return _ref3.apply(this,arguments);};}();// Editar tarea\nvar actualizarTarea=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(tarea){var resultado;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return clienteAxios.put(\"/api/tareas/\".concat(tarea._id),tarea);case 3:resultado=_context4.sent;dispatch({type:ACTUALIZAR_TAREA,payload:resultado.data.tarea});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function actualizarTarea(_x5){return _ref4.apply(this,arguments);};}();// Extraer la tarea para edición\nvar guardarTareaActual=function guardarTareaActual(tarea){dispatch({type:TAREA_ACTUAL,payload:tarea});};// Limpiar la tarea seleccionada\nvar limpiarTarea=function limpiarTarea(){dispatch({type:LIMPIAR_TAREA});};return/*#__PURE__*/React.createElement(tareaContext.Provider,{value:{tareasproyecto:state.tareasproyecto,errortarea:state.errortarea,tareaseleccionada:state.tareaseleccionada,obtenerTareas:obtenerTareas,agregarTarea:agregarTarea,validarTarea:validarTarea,eliminarTarea:eliminarTarea,guardarTareaActual:guardarTareaActual,actualizarTarea:actualizarTarea,limpiarTarea:limpiarTarea}},props.children);};export default TareaState;","map":{"version":3,"sources":["/Users/manuelpolaina/Documents/CURSOS/JUANP/React/MERNtasks/cliente/src/context/tareas/tareaState.js"],"names":["React","useReducer","tareaContext","tareaReducer","TAREAS_PROYECTO","AGREGAR_TAREA","VALIDAR_TAREA","ELIMINAR_TAREA","TAREA_ACTUAL","ACTUALIZAR_TAREA","LIMPIAR_TAREA","clienteAxios","TareaState","props","initialState","tareasproyecto","errortarea","tareaseleccionada","state","dispatch","obtenerTareas","proyecto","console","log","get","params","resultado","data","tareas","type","payload","agregarTarea","tarea","post","validarTarea","eliminarTarea","id","delete","actualizarTarea","put","_id","guardarTareaActual","limpiarTarea","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from 'react';\nimport tareaContext from './tareaContext'\nimport tareaReducer from './tareaReducer';\n\nimport { \n    TAREAS_PROYECTO,\n    AGREGAR_TAREA,\n    VALIDAR_TAREA,\n    ELIMINAR_TAREA,\n    TAREA_ACTUAL,\n    ACTUALIZAR_TAREA,\n    LIMPIAR_TAREA \n} from '../../types'\nimport clienteAxios from '../../config/axios';\n\nconst TareaState = props => {\n    \n    const initialState = {\n        tareasproyecto: [],\n        errortarea: false,\n        tareaseleccionada: null\n    }\n    \n    // Crear dispatch y el state\n    const [state, dispatch] = useReducer(tareaReducer, initialState)\n    \n    // FUNCIONES\n    \n    // Obtener las tareas de un proyecto\n    const obtenerTareas = async proyecto => {\n\n        console.log(proyecto);\n\n        try {\n            const resultado = await clienteAxios.get('../api/tareas', { params: { proyecto }});\n            console.log(resultado.data.tareas);\n            dispatch({\n                type: TAREAS_PROYECTO,\n                payload: resultado.data.tareas\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n    \n    // Agregar una tarea\n    const agregarTarea = async tarea => {\n        try {\n            const resultado = await clienteAxios.post('/api/tareas', tarea)\n            //console.log(resultado.data)\n            dispatch({\n                type: AGREGAR_TAREA,\n                payload: resultado.data.tarea\n            })\n        } catch (error) {\n            console.log(error)\n        }\n    }\n    \n    // Valida y muestra error en la tarea\n    const validarTarea = () => {\n        dispatch({\n            type: VALIDAR_TAREA\n        })\n    }\n    \n    // Eliminar tarea por id\n    const eliminarTarea = async (id, proyecto) => {\n        try {\n            await clienteAxios.delete(`/api/tareas/${id}`, { params: { proyecto }})\n            dispatch({\n                type: ELIMINAR_TAREA,\n                payload: id\n            })\n            \n        } catch (error) {\n            \n        }\n    }\n    \n    // Editar tarea\n    const actualizarTarea = async tarea => {\n        try {\n            const resultado = await clienteAxios.put(`/api/tareas/${tarea._id}`, tarea)\n            dispatch({\n                type: ACTUALIZAR_TAREA,\n                payload: resultado.data.tarea\n            })\n        } catch (error) {\n            console.log(error)\n        }\n    }\n    \n    // Extraer la tarea para edición\n    const guardarTareaActual = tarea => {\n        dispatch({\n            type: TAREA_ACTUAL,\n            payload: tarea\n        })\n    }\n    \n    // Limpiar la tarea seleccionada\n    const limpiarTarea = () => {\n        dispatch({\n            type: LIMPIAR_TAREA\n        })\n    }\n  \n    return(\n        <tareaContext.Provider\n            value={{\n                tareasproyecto: state.tareasproyecto,\n                errortarea: state.errortarea,\n                tareaseleccionada: state.tareaseleccionada,\n                obtenerTareas,\n                agregarTarea,\n                validarTarea,\n                eliminarTarea,\n                guardarTareaActual,\n                actualizarTarea,\n                limpiarTarea\n            }}\n        >\n          {props.children}\n        </tareaContext.Provider>   \n    )\n}\n\nexport default TareaState;"]},"metadata":{},"sourceType":"module"}