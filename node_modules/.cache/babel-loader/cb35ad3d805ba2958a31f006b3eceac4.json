{"ast":null,"code":"var _jsxFileName = \"/Users/manuelpolaina/Documents/CURSOS/JUANP/React/MERNtasks/cliente/src/components/tareas/FormTarea.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport proyectoContext from '../../context/proyectos/proyectoContext';\nimport tareaContext from '../../context/tareas/tareaContext';\n\nconst FormTarea = () => {\n  // STATE de proyectos\n  const proyectosContext = useContext(proyectoContext);\n  const {\n    proyecto\n  } = proyectosContext; // obtener la fn del context de tareas\n\n  const tareasContext = useContext(tareaContext);\n  const {\n    tareaseleccionada,\n    errortarea,\n    agregarTarea,\n    validarTarea,\n    obtenerTareas,\n    actualizarTarea,\n    limpiarTarea\n  } = tareasContext; // Effect que detecta tarea seleccionada\n\n  useEffect(() => {\n    if (tareaseleccionada !== null) {\n      guardarTarea(tareaseleccionada);\n    } else {\n      guardarTarea({\n        nombre: ''\n      });\n    }\n  }, [tareaseleccionada]); // STATE del formulario\n\n  const [tarea, guardarTarea] = useState({\n    nombre: ''\n  }); // extraer nombre de la tarea\n\n  const {\n    nombre\n  } = tarea; // Si no hay ningún proyecto seleccionado\n\n  if (!proyecto) return null; // Array destructuring para extraer proyecto actual\n\n  const [proyectoActual] = proyecto; // Leer los valores del formulario\n\n  const handleChange = e => {\n    guardarTarea({ ...tarea,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const onSubmit = e => {\n    e.preventDefault(); // Validar\n\n    if (nombre.trim() === '') {\n      validarTarea();\n      return;\n    } // ¿Es edición o nueva tarea?\n\n\n    if (tareaseleccionada === null) {\n      // Agregar la nueva tarea al state.tareas, en su proyecto y con estado \"incompleta\"\n      tarea.proyecto = proyectoActual._id;\n      tarea.estado = false;\n      agregarTarea(tarea);\n    } else {\n      // editar tarea existente\n      actualizarTarea(tarea); // elimina la tarea seleccionada\n\n      limpiarTarea();\n    } // Obtener y filtrar tareas del proyectoActual\n\n\n    obtenerTareas(proyectoActual.id); // Reiniciar el form\n\n    guardarTarea({\n      nombre: ''\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"formulario\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contenedor-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"input-text\",\n    placeholder: \"Nombre tarea...\",\n    name: \"nombre\",\n    value: nombre,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contenedor-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-primario btn-submit btn-block\",\n    value: tareaseleccionada ? 'Editar tarea' : 'Agregar tarea',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 23\n    }\n  }))), errortarea ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mensaje error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, \"Una tarea sin nombre, no es tarea ;)\") : null);\n};\n\nexport default FormTarea;","map":{"version":3,"sources":["/Users/manuelpolaina/Documents/CURSOS/JUANP/React/MERNtasks/cliente/src/components/tareas/FormTarea.js"],"names":["React","useContext","useState","useEffect","proyectoContext","tareaContext","FormTarea","proyectosContext","proyecto","tareasContext","tareaseleccionada","errortarea","agregarTarea","validarTarea","obtenerTareas","actualizarTarea","limpiarTarea","guardarTarea","nombre","tarea","proyectoActual","handleChange","e","target","name","value","onSubmit","preventDefault","trim","_id","estado","id"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport proyectoContext from '../../context/proyectos/proyectoContext'\nimport tareaContext from '../../context/tareas/tareaContext'\n\nconst FormTarea = () => {\n  \n      // STATE de proyectos\n      const proyectosContext = useContext(proyectoContext)\n      const { proyecto } = proyectosContext\n      \n      // obtener la fn del context de tareas\n      const tareasContext = useContext(tareaContext)\n      const { tareaseleccionada, errortarea, agregarTarea, validarTarea, obtenerTareas, actualizarTarea, limpiarTarea } = tareasContext\n      \n      // Effect que detecta tarea seleccionada\n      useEffect(() => {\n          if(tareaseleccionada !== null) {\n            guardarTarea(tareaseleccionada)\n          } else {\n            guardarTarea({\n              nombre: ''\n            })\n          }\n          \n      }, [tareaseleccionada])\n      \n      // STATE del formulario\n      const [tarea, guardarTarea] = useState({\n          nombre: ''\n      })\n      // extraer nombre de la tarea\n      const { nombre } = tarea;\n      \n      // Si no hay ningún proyecto seleccionado\n      if(!proyecto) return null;\n        \n      // Array destructuring para extraer proyecto actual\n      const [ proyectoActual ] = proyecto;\n      \n      // Leer los valores del formulario\n      const handleChange = e => {\n          guardarTarea({\n              ...tarea,\n              [e.target.name] : e.target.value\n          })\n      }\n      \n      const onSubmit = e => {\n          e.preventDefault();\n          // Validar\n          if(nombre.trim() === ''){\n            validarTarea()\n            return\n          }\n          \n          // ¿Es edición o nueva tarea?\n          if(tareaseleccionada === null) {\n              // Agregar la nueva tarea al state.tareas, en su proyecto y con estado \"incompleta\"\n              tarea.proyecto = proyectoActual._id\n              tarea.estado = false\n              agregarTarea(tarea)\n          } else {\n            // editar tarea existente\n            actualizarTarea(tarea)\n            // elimina la tarea seleccionada\n            limpiarTarea() \n          }\n          // Obtener y filtrar tareas del proyectoActual\n          obtenerTareas(proyectoActual.id)\n          \n          // Reiniciar el form\n          guardarTarea({\n              nombre: ''\n          })\n      }\n      \n      return (  \n          <div className='formulario'>\n              <form\n                  onSubmit={onSubmit}\n              >\n                  <div className='contenedor-input'>\n                      <input\n                          type='text'\n                          className='input-text'\n                          placeholder='Nombre tarea...'\n                          name='nombre'\n                          value={nombre}\n                          onChange={handleChange}\n                      />\n                  </div>\n                  <div className='contenedor-input'>\n                      <input\n                          type='submit'\n                          className='btn btn-primario btn-submit btn-block'\n                          value={tareaseleccionada ? 'Editar tarea' : 'Agregar tarea'}\n                      />\n                  </div>\n              </form>\n              { errortarea \n                  ? <p className='mensaje error'>Una tarea sin nombre, no es tarea ;)</p>\n                  : null\n              }\n          </div> \n      );\n}\n \nexport default FormTarea;"]},"metadata":{},"sourceType":"module"}